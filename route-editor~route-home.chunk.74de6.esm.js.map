{"version":3,"sources":["webpack:///./utils/wrapText.ts","webpack:///./utils/measure.ts","webpack:///../src/index.js","webpack:///./utils/tree.ts","webpack:///./utils/layout.ts","webpack:///./components/colorpicker/index.tsx","webpack:///./components/grid/index.tsx","webpack:///./components/grid/style.scss","webpack:///./components/icon.tsx"],"names":["wrapText","text","fontSize","weight","lines","replace","split","width","Math","max","map","l","ctx","font","measureText","measure","document","createElement","getContext","getHookState","index","type","options","currentComponent","currentHook","hooks","__","__h","length","push","useState","initialState","reducer","init","hookState","currentIndex","_reducer","invokeOrReturn","action","nextValue","setState","useReducer","useEffect","callback","args","state","argsChanged","useRef","initialValue","useMemo","current","factory","useContext","context","provider","sub","props","value","flushAfterPaintEffects","component","afterPaintEffects","shift","forEach","invokeCleanup","invokeEffect","e","hook","comp","cleanup","oldArgs","newArgs","some","arg","f","prevRaf","oldBeforeDiff","oldBeforeRender","oldAfterDiff","diffed","oldCommit","oldBeforeUnmount","unmount","vnode","c","requestAnimationFrame","raf","done","clearTimeout","timeout","HAS_RAF","cancelAnimationFrame","setTimeout","commitQueue","filter","cb","hasErrored","s","setExtremes","tree","cs","el","er","msel","mser","bottom","y","h","updateIYL","minY","i","ih","lowY","next","IYL","moveSubtree","si","distance","mod","nr","change","distributeExtra","nextLeftContour","tl","nextRightContour","tr","seperate","sr","mssr","cl","mscl","prelim","w","sy","cy","modsumcl","li","diff","setLeftThread","modsumsr","ri","setRightThread","firstWalk","positionRoot","secondWalk","modsum","x","d","modsumdelta","addChildSpacing","layout","Tree","constructor","children","ignore","this","t","bb","treeData","convert","assignCoordinates","notes","note","heading","n","height","treeWidth","treeHeight","addBoundingBox","child","removeBoundingBox","gap","bottomPadding","colors","j","k","ColorPicker","onClose","setIndex","view","elements","observer","IntersectionObserver","entries","entry","find","isIntersecting","target","root","rootMargin","threshold","observe","disconnect","class","style","onClick","scrollIntoView","behavior","opacity","ref","table","key","HTMLTableCellElement","className","rows","data","_","title","reduce","prev","Grid","zoom","editing","readonly","picker","setPicker","fs","FileSystemContext","array","nodes","body","node","points","id","p","toString","join","x1","y1","x2","y2","offset","stroke","fill","rx","overflow","placeholder","onInput","currentTarget","role","dx","preventDefault","floor","random","includes","r","cx","Layout","all","xmlns","viewBox","color","Icon","Component","render","name"],"mappings":"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","file":"route-editor~route-home.chunk.74de6.esm.js","sourcesContent":["import measure from \"./measure\";\r\n\r\nexport default function wrapText(text: string, fontSize = 17, weight = 400) {\r\n\tconst lines = text.replace(\r\n\t\t/(?![^\\n]{1,20}$)([^\\n]{1,20})\\s/g, '$1\\n'\r\n\t).split(\"\\n\");\r\n\r\n\treturn {lines, width: Math.max(...lines.map(l => measure(l, fontSize, weight)))}\r\n}","export const ctx = document.createElement(\"canvas\").getContext(\"2d\")!;\r\n\r\nexport default function measure(text: string, fontSize = 17, weight = 400) {\r\n\tctx.font = `${weight} ${fontSize}px Roboto, sans-serif `;\r\n\treturn ctx.measureText(text).width;\r\n}","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\thooks._pendingEffects = [];\n\t}\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks && c.__hooks._pendingEffects.length) {\n\t\tafterPaint(afterPaintEffects.push(c));\n\t}\n\tcurrentComponent = null;\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} [initialState]\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = hookState._reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\t}\n\n\treturn hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => ref.current = null;\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * @param {(error: any) => void} cb\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = err => {\n\t\t\tif (state._value) state._value(err);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","import type List from \"components/list\";\r\n\r\nclass Tree {\r\n\tc: Tree[];\r\n\tcs: number;\r\n\tx = 0;\r\n\tprelim = 0;\r\n\tmod = 0;\r\n\tshift = 0;\r\n\tchange = 0;\r\n\ttl: Tree | null = null; // Left thread\r\n\ttr: Tree | null = null; // Right thread\r\n\tel: Tree | null = null; // extreme left nodes\r\n\ter: Tree | null = null; // extreme right nodes\r\n\t//sum of modifiers at the extreme nodes\r\n\tmsel = 0;\r\n\tmser = 0;\r\n\tconstructor(public w: number, public h: number, public y: number, public children: Tree[], public ignore = false) {\r\n\t\tthis.c = children.filter(t => !t.ignore);\r\n\t\tthis.cs = this.c.length;\r\n\t}\r\n}\r\n\r\nnamespace Tree {\r\n\texport interface Data extends List.Item {\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t\twidth: number;\r\n\t\theight: number;\r\n\t\tchildren: Data[];\r\n\t}\r\n}\r\n\r\nfunction setExtremes(tree: Tree) {\r\n\tif (tree.cs === 0) {\r\n\t\ttree.el = tree;\r\n\t\ttree.er = tree;\r\n\t\ttree.msel = tree.mser = 0;\r\n\t} else {\r\n\t\ttree.el = tree.c[0].el;\r\n\t\ttree.msel = tree.c[0].msel;\r\n\t\ttree.er = tree.c[tree.cs - 1].er;\r\n\t\ttree.mser = tree.c[tree.cs - 1].mser;\r\n\t}\r\n}\r\n\r\nfunction bottom(tree: Tree) {\r\n\treturn tree.y + tree.h;\r\n}\r\n\r\n/* A linked list of the indexes of left siblings and their lowest vertical coordinate.\r\n */\r\nclass IYL {\r\n\tconstructor(public lowY: number, public index: number, public next: IYL) {}\r\n}\r\n\r\nfunction updateIYL(minY: number, i: number, ih: IYL) {\r\n\t// Remove siblings that are hidden by the new subtree.\r\n\twhile (ih !== null && minY >= ih.lowY) {\r\n\t\t// Prepend the new subtree\r\n\t\tih = ih.next;\r\n\t}\r\n\treturn new IYL(minY, i, ih);\r\n}\r\n\r\nfunction distributeExtra(tree: Tree, i: number, si: number, distance: number) {\r\n\t// Are there intermediate children?\r\n\tif (si !== i - 1) {\r\n\t\tconst nr = i - si;\r\n\t\ttree.c[si + 1].shift += distance / nr;\r\n\t\ttree.c[i].shift -= distance / nr;\r\n\t\ttree.c[i].change -= distance - distance / nr;\r\n\t}\r\n}\r\n\r\nfunction moveSubtree(tree: Tree, i: number, si: number, distance: number) {\r\n\t// Move subtree by changing mod.\r\n\ttree.c[i].mod += distance;\r\n\ttree.c[i].msel += distance;\r\n\ttree.c[i].mser += distance;\r\n\tdistributeExtra(tree, i, si, distance);\r\n}\r\n\r\nfunction nextLeftContour(tree: Tree) {\r\n\treturn tree.cs === 0 ? tree.tl : tree.c[0];\r\n}\r\n\r\nfunction nextRightContour(tree: Tree) {\r\n\treturn tree.cs === 0 ? tree.tr : tree.c[tree.cs - 1];\r\n}\r\n\r\nfunction setLeftThread(tree: Tree, i: number, cl: Tree, modsumcl: number) {\r\n\tconst li = tree.c[0].el!;\r\n\tli.tl = cl;\r\n\t// Change mod so that the sum of modifier after following thread is correct.\r\n\tconst diff = modsumcl - cl.mod - tree.c[0].msel;\r\n\tli.mod += diff;\r\n\t// Change preliminary x coordinate so that the node does not move.\r\n\tli.prelim -= diff;\r\n\t// Update extreme node and its sum of modifiers.\r\n\ttree.c[0].el = tree.c[i].el;\r\n\ttree.c[0].msel = tree.c[i].msel;\r\n}\r\n\r\n// Symmetrical to setLeftThread\r\nfunction setRightThread(tree: Tree, i: number, sr: Tree, modsumsr: number) {\r\n\tconst ri = tree.c[i].er!;\r\n\tri.tr = sr;\r\n\tconst diff = modsumsr - sr.mod - tree.c[i].mser;\r\n\tri.mod += diff;\r\n\tri.prelim -= diff;\r\n\ttree.c[i].er = tree.c[i - 1].er;\r\n\ttree.c[i].mser = tree.c[i - 1].mser;\r\n}\r\n\r\nfunction seperate(tree: Tree, i: number, ih: IYL) {\r\n\t// Right contour node of left siblings and its sum of modifiers.\r\n\tlet sr = tree.c[i - 1];\r\n\tlet mssr = sr.mod;\r\n\t// Left contour node of right siblings and its sum of modifiers.\r\n\tlet cl = tree.c[i];\r\n\tlet mscl = cl.mod;\r\n\twhile (sr !== null && cl !== null) {\r\n\t\tif (bottom(sr) > ih.lowY) {\r\n\t\t\tih = ih.next;\r\n\t\t}\r\n\t\t// How far to the left of the right side of sr is the left side of cl.\r\n\t\tconst distance = mssr + sr.prelim + sr.w - (mscl + cl.prelim);\r\n\t\tif (distance > 0) {\r\n\t\t\tmscl += distance;\r\n\t\t\tmoveSubtree(tree, i, ih.index, distance);\r\n\t\t}\r\n\r\n\t\tconst sy = bottom(sr);\r\n\t\tconst cy = bottom(cl);\r\n\t\tif (sy <= cy) {\r\n\t\t\tsr = nextRightContour(sr)!;\r\n\t\t\tif (sr !== null) {\r\n\t\t\t\tmssr += sr.mod;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (sy >= cy) {\r\n\t\t\tcl = nextLeftContour(cl)!;\r\n\t\t\tif (cl !== null) {\r\n\t\t\t\tmscl += cl.mod;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Set threads and update extreme nodes.\r\n\t// In the first case, the current subtree must be taller than the left siblings.\r\n\tif (sr === null && cl !== null) {\r\n\t\tsetLeftThread(tree, i, cl, mscl);\r\n\t} else if (sr !== null && cl === null) {\r\n\t\tsetRightThread(tree, i, sr, mssr);\r\n\t}\r\n}\r\n\r\nfunction positionRoot(tree: Tree) {\r\n\t// Position root between children, taking into account their mod.\r\n\ttree.prelim =\r\n\t\t(tree.c[0].prelim +\r\n\t\t\ttree.c[0].mod +\r\n\t\t\ttree.c[tree.cs - 1].mod +\r\n\t\t\ttree.c[tree.cs - 1].prelim +\r\n\t\t\ttree.c[tree.cs - 1].w) /\r\n\t\t\t2 -\r\n\t\ttree.w / 2;\r\n}\r\n\r\nfunction firstWalk(tree: Tree) {\r\n\tif (tree.cs === 0) {\r\n\t\tsetExtremes(tree);\r\n\t\treturn;\r\n\t}\r\n\r\n\tfirstWalk(tree.c[0]);\r\n\tlet ih = updateIYL(bottom(tree.c[0].el!), 0, null!);\r\n\tfor (let i = 1; i < tree.cs; i++) {\r\n\t\tfirstWalk(tree.c[i]);\r\n\t\tconst minY = bottom(tree.c[i].er!);\r\n\t\tseperate(tree, i, ih);\r\n\t\tih = updateIYL(minY, i, ih);\r\n\t}\r\n\tpositionRoot(tree);\r\n\tsetExtremes(tree);\r\n}\r\n\r\nfunction addChildSpacing(tree: Tree) {\r\n\tlet d = 0;\r\n\tlet modsumdelta = 0;\r\n\tfor (let i = 0; i < tree.cs; i++) {\r\n\t\td += tree.c[i].shift;\r\n\t\tmodsumdelta += d + tree.c[i].change;\r\n\t\ttree.c[i].mod += modsumdelta;\r\n\t}\r\n}\r\n\r\nfunction secondWalk(tree: Tree, modsum: number) {\r\n\tmodsum += tree.mod;\r\n\t// Set absolute (no-relative) horizontal coordinates.\r\n\ttree.x = tree.prelim + modsum;\r\n\taddChildSpacing(tree);\r\n\tfor (let i = 0; i < tree.cs; i++) {\r\n\t\tsecondWalk(tree.c[i], modsum);\r\n\t}\r\n}\r\n\r\nfunction layout(tree: Tree) {\r\n\tfirstWalk(tree);\r\n\tsecondWalk(tree, 0);\r\n}\r\n\r\nexport {Tree, layout};\r\n","import List from \"components/list\";\r\nimport measure from \"./wrapText\";\r\nimport {layout, Tree} from \"./tree\";\r\n\r\nclass BoundingBox {\r\n\t/**\r\n\t * @param {number} gap - the gap between sibling nodes\r\n\t * @param {number} bottomPadding - the height reserved for connection drawing\r\n\t */\r\n\tconstructor(public gap: number, public bottomPadding: number) {\r\n\t\tthis.gap = gap;\r\n\t\tthis.bottomPadding = bottomPadding;\r\n\t}\r\n\r\n\taddBoundingBox(width: number, height: number) {\r\n\t\treturn {width: width + this.gap, height: height + this.bottomPadding};\r\n\t}\r\n\r\n\t/**\r\n\t * Return the coordinate without the bounding box for a node\r\n\t */\r\n\tremoveBoundingBox(x: number, y: number) {\r\n\t\treturn {x: x + this.gap / 2, y};\r\n\t}\r\n}\r\n\r\nclass Layout {\r\n\tconstructor(public bb: BoundingBox) {}\r\n\r\n\t/**\r\n\t * Layout treeData.\r\n\t * Return modified treeData and the bounding box encompassing all the nodes.\r\n\t *\r\n\t * See getSize() for more explanation.\r\n\t */\r\n\tlayout(treeData: List.Item) {\r\n\t\tconst tree = this.convert(treeData);\r\n\t\tlayout(tree);\r\n\t\tthis.assignCoordinates(tree, treeData);\r\n\t\treturn treeData as Tree.Data;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns Tree to layout, with bounding boxes added to each node.\r\n\t */\r\n\tconvert(treeData: List.Item, y = 16): Tree {\r\n\t\tconst notes = treeData.children.filter(note => note.type === \"note\");\r\n\t\tconst heading = measure(treeData.text, 17, 600);\r\n\t\tconst width =\r\n\t\t\tMath.max(\r\n\t\t\t\t...notes.map(n => measure(n.text).width + 20),\r\n\t\t\t\theading.width + 78,\r\n\t\t\t\tmeasure(\"New item...\", 17, 600).width + 78\r\n\t\t\t) + 34;\r\n\t\tconst height = (notes.length + (heading.lines.length || 1)) * 19 + 24;\r\n\t\tObject.assign(treeData, {width, height});\r\n\t\tconst {width: treeWidth, height: treeHeight} = this.bb.addBoundingBox(width, height);\r\n\r\n\t\treturn new Tree(\r\n\t\t\ttreeWidth,\r\n\t\t\ttreeHeight,\r\n\t\t\ty,\r\n\t\t\ttreeData.children.map(child => this.convert(child, y + treeHeight)),\r\n\t\t\ttreeData.type === \"note\"\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Assign layout tree x, y coordinates back to treeData,\r\n\t * with bounding boxes removed.\r\n\t */\r\n\tassignCoordinates(tree: Tree, treeData: List.Item) {\r\n\t\tObject.assign(treeData, this.bb.removeBoundingBox(tree.x, tree.y));\r\n\t\tconst children = treeData.children; \r\n\t\tfor (let i = 0; i < children.length; i++) {\r\n\t\t\tthis.assignCoordinates(tree.children[i], children[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport {Layout, BoundingBox};\r\nexport default new Layout(new BoundingBox(80, 80));","import {h, FunctionComponent} from \"preact\";\r\nimport {useEffect, useRef, useState} from \"preact/hooks\";\r\nimport \"./style.scss\";\r\n\r\nconst colors = [] as [number, number, number, number][][];\r\n\r\nfor (let i = 0, j = 0; j < 3; j++) {\r\n\tcolors[j] = [];\r\n\tfor (let k = 0; k < 3; k++) {\r\n\t\tcolors[j][k] = [++i, ++i, ++i, ++i];\r\n\t}\r\n}\r\n\r\nconst ColorPicker: FunctionComponent<ColorPicker.Props> = ({onClose, ...props}) => {\r\n\tconst [index, setIndex] = useState(0);\r\n\tconst view = useRef<HTMLDivElement>(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst elements = view.current!.children;\r\n\r\n\t\tconst watchIndex: IntersectionObserverCallback = (entries) => {\r\n\t\t\tconst entry = entries.find(e => e.isIntersecting);\r\n\t\t\tif (entry) {\r\n\t\t\t\tfor (let i = 0; ; i++) {\r\n\t\t\t\t\tif (elements[i] === entry.target) {\r\n\t\t\t\t\t\tsetIndex(i);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst observer = new IntersectionObserver(watchIndex, {\r\n\t\t\troot: view.current!,\r\n\t\t\trootMargin: \"0px\",\r\n\t\t\tthreshold: 0.75\r\n\t\t});\r\n\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tobserver.observe(elements[i]);\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tobserver.disconnect();\r\n\t\t}\r\n\t});\r\n\r\n\treturn <div class=\"color-picker\" {...props}>\r\n\t\t<h4>\r\n\t\t\tColor Picker\r\n\t\t\t<span class=\"material-icons-round\" style=\"float: right;\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (index) {\r\n\t\t\t\t\t\t\tview.current!.children[index - 1].scrollIntoView({\r\n\t\t\t\t\t\t\t\tbehavior: \"smooth\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tstyle={{opacity: index ? 1 : 0.5}}\r\n\t\t\t\t>\r\n\t\t\t\t\tarrow_back_ios\r\n\t\t\t\t</span>\r\n\t\t\t\t<span\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (index < colors.length) {\r\n\t\t\t\t\t\t\tview.current!.children[index + 1].scrollIntoView({\r\n\t\t\t\t\t\t\t\tbehavior: \"smooth\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tstyle={{opacity: index < 2 ? 1 : 0.5}}\r\n\t\t\t\t>\r\n\t\t\t\t\tarrow_forward_ios\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\t\t</h4>\r\n\t\t<div class=\"swipe-view\" ref={view}>\r\n\t\t\t{colors.map((table, i) => (\r\n\t\t\t\t<section key={i} onClick={e => {\r\n\t\t\t\t\tif (e.target instanceof HTMLTableCellElement) {\r\n\t\t\t\t\t\tonClose(e.target.className);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<table>\r\n\t\t\t\t\t\t{table.map((rows, i) => (\r\n\t\t\t\t\t\t\t<tr key={i}>\r\n\t\t\t\t\t\t\t\t{rows.map((data, i) => (\r\n\t\t\t\t\t\t\t\t\t<td key={i} class={`color-${data}`} />\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</section>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t\t<nav>\r\n\t\t\t{colors.map((_, i) => (\r\n\t\t\t\t<button\r\n\t\t\t\t\tstyle={{opacity: i === index ? 1 : 0.5}}\r\n\t\t\t\t\ttitle={`Page ${i + 1}`}\r\n\t\t\t\t\tonClick={() => setIndex(i)}\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t</nav>\r\n\t\t<h5><span onClick={() => onClose()} style=\"cursor: pointer;\">Close</span></h5>\r\n\t</div>;\r\n};\r\n\r\ndeclare namespace ColorPicker {\r\n\texport interface Props extends h.JSX.HTMLAttributes<HTMLDivElement> {\r\n\t\tonClose(color?: string): void;\r\n\t}\r\n}\r\n\r\nexport default ColorPicker;","/**\r\n * @author Tomáš Wróbel\r\n * @license MIT\r\n * @format\r\n * \r\n * Grid view, also called Map view, or Tree view,\r\n * is what makes Vise a mind map app.\r\n * It uses Non-layered tidy tree layout algorithm\r\n * by A.J. van der Ploeg\r\n */\r\nimport {FunctionComponent, h, Fragment} from \"preact\";\r\nimport List from \"../list\";\r\nimport {Tree} from \"utils/tree\";\r\nimport Layout from \"utils/layout\";\r\nimport FileSystemContext from \"../filesystem/context\";\r\nimport {useContext, useState} from \"preact/hooks\";\r\nimport standaloneStylesheet from \"!!raw-loader!sass-loader!./style.scss\";\r\nimport measure from \"utils/wrapText\";\r\nimport ColorPicker from \"components/colorpicker\";\r\nimport \"./style.scss\";\r\n\r\nconst reduce = (prev: [number, number], current: import(\"utils/tree\").Tree.Data): [number, number] => {\r\n\tconst [width, height] = current.children.reduce(reduce, prev);\r\n\treturn [\r\n\t\tMath.max(width, current.x + current.width),\r\n\t\tMath.max(height, current.y + current.height)\r\n\t];\r\n};\r\n\r\nconst Grid: FunctionComponent<Grid.Props> = ({zoom = 1, editing: index, readonly}) => {\r\n\tconst [picker, setPicker] = useState<Tree.Data | null>(null);\r\n\tconst fs = useContext(FileSystemContext);\r\n\tconst map = (tree: Tree.Data, i: number, array: Tree.Data[]) => {\r\n\t\tconst notes = tree.children.filter(note => note.type === \"note\");\r\n\t\tconst nodes = tree.children.filter(body => body.type !== \"note\");\r\n\t\tconst {lines} = measure(tree.text);\r\n\t\treturn (\r\n\t\t\t<g class={tree.type} key={i}>\r\n\t\t\t\t{/* arrows */}\r\n\t\t\t\t{nodes.map((node) => {\r\n\t\t\t\t\tconst points = [\r\n\t\t\t\t\t\t[tree.x + tree.width / 2, tree.y + tree.height - 4],\r\n\t\t\t\t\t\t[tree.x + tree.width / 2, tree.y + tree.height + 20],\r\n\t\t\t\t\t\t[node.x + node.width / 2, node.y - 32],\r\n\t\t\t\t\t\t[node.x + node.width / 2, node.y - 12],\r\n\t\t\t\t\t\t[node.x + node.width / 2 + 8, node.y - 20],\r\n\t\t\t\t\t\t[node.x + node.width / 2, node.y - 12],\r\n\t\t\t\t\t\t[node.x + node.width / 2 - 8, node.y - 20],\r\n\t\t\t\t\t];\r\n\t\t\t\t\tconst id = points.map(p => p.map(n => n.toString(16)).join(\"_\")).join(\"-\");\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Fragment key={id}>\r\n\t\t\t\t\t\t\t<linearGradient id={id} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n\t\t\t\t\t\t\t\t<stop offset=\"0%\" class={tree.type} />\r\n\t\t\t\t\t\t\t\t<stop offset=\"100%\" class={node.type} />\r\n\t\t\t\t\t\t\t</linearGradient>\r\n\t\t\t\t\t\t\t<polyline\r\n\t\t\t\t\t\t\t\tpoints={points.join(\" \")}\r\n\t\t\t\t\t\t\t\tstroke={`url(#${id})`}\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tstroke-width={2}\r\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t<g class=\"item\">\r\n\t\t\t\t\t<rect height={tree.height} width={tree.width} x={tree.x} y={tree.y} rx={6} />\r\n\t\t\t\t\t{readonly ? <text \r\n\t\t\t\t\t\tx={tree.x + 12}\r\n\t\t\t\t\t\ty={tree.y + 12}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{tree.text}\r\n\t\t\t\t\t</text> : <>\r\n\t\t\t\t\t\t<foreignObject\r\n\t\t\t\t\t\t\twidth={tree.width - 24}\r\n\t\t\t\t\t\t\tx={tree.x + 12}\r\n\t\t\t\t\t\t\ty={tree.y + 12}\r\n\t\t\t\t\t\t\theight={19 * lines.length}\r\n\t\t\t\t\t\t\toverflow=\"visible\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tvalue={lines.join(\"\\n\")}\r\n\t\t\t\t\t\t\t\tplaceholder=\"New item...\"\r\n\t\t\t\t\t\t\t\tonInput={e => {\r\n\t\t\t\t\t\t\t\t\tfs.change(\r\n\t\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t\t(key, current) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (current === tree) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t...tree,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: e.currentTarget.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif (key !== \"width\" && key !== \"height\" && key !== \"x\" && key !== \"y\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn current;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</foreignObject>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tfill=\"#FFF\"\r\n\t\t\t\t\t\t\trole=\"hidden\"\r\n\t\t\t\t\t\t\tstroke=\"none\"\r\n\t\t\t\t\t\t\tx={tree.x + tree.width - 102}\r\n\t\t\t\t\t\t\ty={tree.y + 14}\r\n\t\t\t\t\t\t\tclass=\"material-icons-round\"\r\n\t\t\t\t\t\t\ttext-anchor=\"start\"\r\n\t\t\t\t\t\t\tdominant-baseline=\"hanging\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tinvert_colors\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tfill-opacity=\"0.5\"\r\n\t\t\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\t\t\tstroke=\"none\"\r\n\t\t\t\t\t\t\tx={tree.x + tree.width - 102}\r\n\t\t\t\t\t\t\ty={tree.y + 14}\r\n\t\t\t\t\t\t\tclass=\"material-icons-round\"\r\n\t\t\t\t\t\t\ttext-anchor=\"start\"\r\n\t\t\t\t\t\t\tdominant-baseline=\"hanging\"\r\n\t\t\t\t\t\t\tonClick={() => setPicker(picker === tree ? null : tree)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tinvert_colors\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tfill=\"#FFF\"\r\n\t\t\t\t\t\t\tstroke=\"none\"\r\n\t\t\t\t\t\t\trole=\"hidden\"\r\n\t\t\t\t\t\t\tx={tree.x + tree.width - 102}\r\n\t\t\t\t\t\t\ty={tree.y + 14}\r\n\t\t\t\t\t\t\tclass=\"material-icons-round\"\r\n\t\t\t\t\t\t\ttext-anchor=\"start\"\r\n\t\t\t\t\t\t\tdominant-baseline=\"hanging\"\r\n\t\t\t\t\t\t\tdx={34}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tadd\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tfill-opacity=\"0.5\"\r\n\t\t\t\t\t\t\tstroke=\"none\"\r\n\t\t\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\t\t\tx={tree.x + tree.width - 102}\r\n\t\t\t\t\t\t\ty={tree.y + 14}\r\n\t\t\t\t\t\t\tclass=\"material-icons-round\"\r\n\t\t\t\t\t\t\ttext-anchor=\"start\"\r\n\t\t\t\t\t\t\tdominant-baseline=\"hanging\"\r\n\t\t\t\t\t\t\tdx={34}\r\n\t\t\t\t\t\t\tonClick={(e?: Event) => {\r\n\t\t\t\t\t\t\t\te?.preventDefault();\r\n\t\t\t\t\t\t\t\tfs.change(\r\n\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t(key, value) => {\r\n\t\t\t\t\t\t\t\t\t\tif (key !== \"width\" && key !== \"height\" && key !== \"x\" && key !== \"y\") {\r\n\t\t\t\t\t\t\t\t\t\t\tif (value === tree) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t...tree,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchildren: [...tree.children, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext: \"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: `color-${Math.floor(Math.random() * 36) + 1}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchildren: []\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tadd\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tfill=\"#FFF\"\r\n\t\t\t\t\t\t\tstroke=\"none\"\r\n\t\t\t\t\t\t\trole=\"hidden\"\r\n\t\t\t\t\t\t\tx={tree.x + tree.width - 102}\r\n\t\t\t\t\t\t\ty={tree.y + 14}\r\n\t\t\t\t\t\t\tclass=\"material-icons-round\"\r\n\t\t\t\t\t\t\ttext-anchor=\"start\"\r\n\t\t\t\t\t\t\tdominant-baseline=\"hanging\"\r\n\t\t\t\t\t\t\tdx={68}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tdelete_forever\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tfill-opacity=\"0.5\"\r\n\t\t\t\t\t\t\tstroke=\"none\"\r\n\t\t\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\t\t\tx={tree.x + tree.width - 102}\r\n\t\t\t\t\t\t\ty={tree.y + 14}\r\n\t\t\t\t\t\t\tclass=\"material-icons-round\"\r\n\t\t\t\t\t\t\ttext-anchor=\"start\"\r\n\t\t\t\t\t\t\tdominant-baseline=\"hanging\"\r\n\t\t\t\t\t\t\tdx={68}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tfs.change(\r\n\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t(key, value) => {\r\n\t\t\t\t\t\t\t\t\t\tif (key !== \"width\" && key !== \"height\" && key !== \"x\" && key !== \"y\") {\r\n\t\t\t\t\t\t\t\t\t\t\tif (value.children && value.children.includes(tree)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t...value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchildren: array.filter(t => t !== tree)\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tdelete_forever\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</>}\r\n\t\t\t\t\t{notes.map((note, i) => {\r\n\t\t\t\t\t\treturn <Fragment key={i}>\r\n\t\t\t\t\t\t\t{readonly ? <text\r\n\t\t\t\t\t\t\t\tx={tree.x + 32}\r\n\t\t\t\t\t\t\t\ty={tree.y + 24 + (i + 1) * 19}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{note.text}\r\n\t\t\t\t\t\t\t</text> : <foreignObject\r\n\t\t\t\t\t\t\t\tx={tree.x + 32}\r\n\t\t\t\t\t\t\t\ty={tree.y + 24 + (i + 1) * 19}\r\n\t\t\t\t\t\t\t\twidth={tree.width - 32}\r\n\t\t\t\t\t\t\t\theight={19}\r\n\t\t\t\t\t\t\t\tstyle=\"transform: translateY(-0.25em);\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<textarea value={note.text} onInput={e => fs.change(\r\n\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t(key, value) => {\r\n\t\t\t\t\t\t\t\t\t\tif (key !== \"width\" && key !== \"height\" && key !== \"x\" && key !== \"y\") {\r\n\t\t\t\t\t\t\t\t\t\t\tif (value === note) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn {...note, text: e.currentTarget.value};\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t)} placeholder=\"New item...\" />\r\n\t\t\t\t\t\t\t</foreignObject>}\r\n\t\t\t\t\t\t\t<circle fill=\"#FFF\" stroke=\"none\" r={3} cx={tree.x + 20} cy={tree.y + 48 + i * 19} />\r\n\t\t\t\t\t\t</Fragment>;\r\n\t\t\t\t\t})}\r\n\t\t\t\t</g>\r\n\t\t\t\t{nodes.map(map)}\r\n\t\t\t</g>\r\n\t\t);\r\n\t};\r\n\tconst layout = Layout.layout(fs.all[index]);\r\n\tconst [width, height] = reduce([0, 0], layout);\r\n\tif (readonly) {\r\n\t\treturn (\r\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"tree\" viewBox={`0 0 ${width + 92} ${height + 92}`}>\r\n\t\t\t\t{map(layout, 0, [layout])}\r\n\t\t\t\t{readonly === \"standalone\" && <style>{standaloneStylesheet}</style>}\r\n\t\t\t</svg>\r\n\t\t);\r\n\t}\r\n\treturn (\r\n\t\t<div style={{width: (width + 318) * zoom, height: (height + 321) * zoom}} class=\"wrapper\">\r\n\t\t\t<svg\r\n\t\t\t\tclass=\"tree\"\r\n\t\t\t\tviewBox={`0 0 ${(width + 318) / zoom} ${(height + 321) / zoom}`}\r\n\t\t\t\twidth={width + 318}\r\n\t\t\t\theight={height + 321}\r\n\t\t\t>\r\n\t\t\t\t{map(layout, 0, [layout])}\r\n\t\t\t\t{picker && (\r\n\t\t\t\t\t<foreignObject x={picker.x + picker.width} y={picker.y} width={1} height={1} overflow=\"visible\">\r\n\t\t\t\t\t\t<ColorPicker onClose={color => {\r\n\t\t\t\t\t\t\tif (color) {\r\n\t\t\t\t\t\t\t\tfs.change(\r\n\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t(key, value) => {\r\n\t\t\t\t\t\t\t\t\t\tif (value === picker) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...value,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype: color\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (key !== \"width\" && key !== \"height\" && key !== \"x\" && key !== \"y\") {\r\n\t\t\t\t\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsetPicker(null);\r\n\t\t\t\t\t\t}} />\r\n\t\t\t\t\t</foreignObject>\r\n\t\t\t\t)}\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ndeclare namespace Grid {\r\n\texport interface Props extends List.Props {\r\n\t\treadonly?: \"standalone\" | true;\r\n\t}\r\n}\r\n\r\nexport default Grid;\r\n","export default \"div.wrapper{margin:auto}svg.tree *{stop-color:inherit}svg.tree .color-1{fill:#4f6ba2;stroke:rgba(79,107,162,.4);stop-color:rgba(79,107,162,.6);stroke-width:12px}svg.tree .color-2{fill:#4f7aa2;stroke:rgba(79,122,162,.4);stop-color:rgba(79,122,162,.6);stroke-width:12px}svg.tree .color-3{fill:#4f84a2;stroke:rgba(79,132,162,.4);stop-color:rgba(79,132,162,.6);stroke-width:12px}svg.tree .color-4{fill:#4f93a2;stroke:rgba(79,147,162,.4);stop-color:rgba(79,147,162,.6);stroke-width:12px}svg.tree .color-5{fill:#4f9da2;stroke:rgba(79,157,162,.4);stop-color:rgba(79,157,162,.6);stroke-width:12px}svg.tree .color-6{fill:#4fa25c;stroke:rgba(79,162,92,.4);stop-color:rgba(79,162,92,.6);stroke-width:12px}svg.tree .color-7{fill:#4fa270;stroke:rgba(79,162,112,.4);stop-color:rgba(79,162,112,.6);stroke-width:12px}svg.tree .color-8{fill:#4fa27a;stroke:rgba(79,162,122,.4);stop-color:rgba(79,162,122,.6);stroke-width:12px}svg.tree .color-9{fill:#4fa28e;stroke:rgba(79,162,142,.4);stop-color:rgba(79,162,142,.6);stroke-width:12px}svg.tree .color-10{fill:#4fa29d;stroke:rgba(79,162,157,.4);stop-color:rgba(79,162,157,.6);stroke-width:12px}svg.tree .color-11{fill:#51a24f;stroke:rgba(81,162,79,.4);stop-color:rgba(81,162,79,.6);stroke-width:12px}svg.tree .color-12{fill:#696cb6;stroke:rgba(105,108,182,.4);stop-color:rgba(105,108,182,.6);stroke-width:12px}svg.tree .color-13{fill:#6c7ebd;stroke:rgba(108,126,189,.4);stop-color:rgba(108,126,189,.6);stroke-width:12px}svg.tree .color-14{fill:#6fa24f;stroke:rgba(111,162,79,.4);stop-color:rgba(111,162,79,.6);stroke-width:12px}svg.tree .color-15{fill:#7469b6;stroke:rgba(116,105,182,.4);stop-color:rgba(116,105,182,.6);stroke-width:12px}svg.tree .color-16{fill:#7d4fa2;stroke:rgba(125,79,162,.4);stop-color:rgba(125,79,162,.6);stroke-width:12px}svg.tree .color-17{fill:#8269b6;stroke:rgba(130,105,182,.4);stop-color:rgba(130,105,182,.6);stroke-width:12px}svg.tree .color-18{fill:#82a24f;stroke:rgba(130,162,79,.4);stop-color:rgba(130,162,79,.6);stroke-width:12px}svg.tree .color-19{fill:#8c4fa2;stroke:rgba(140,79,162,.4);stop-color:rgba(140,79,162,.6);stroke-width:12px}svg.tree .color-20{fill:#9b4fa2;stroke:rgba(155,79,162,.4);stop-color:rgba(155,79,162,.6);stroke-width:12px}svg.tree .color-21{fill:#9ba24f;stroke:rgba(155,162,79,.4);stop-color:rgba(155,162,79,.6);stroke-width:12px}svg.tree .color-22{fill:#a24f4f;stroke:rgba(162,79,79,.4);stop-color:rgba(162,79,79,.6);stroke-width:12px}svg.tree .color-23{fill:#a24f6d;stroke:rgba(162,79,109,.4);stop-color:rgba(162,79,109,.6);stroke-width:12px}svg.tree .color-24{fill:#a24f7c;stroke:rgba(162,79,124,.4);stop-color:rgba(162,79,124,.6);stroke-width:12px}svg.tree .color-25{fill:#a24f8b;stroke:rgba(162,79,139,.4);stop-color:rgba(162,79,139,.6);stroke-width:12px}svg.tree .color-26{fill:#a24f9a;stroke:rgba(162,79,154,.4);stop-color:rgba(162,79,154,.6);stroke-width:12px}svg.tree .color-27{fill:#a2544f;stroke:rgba(162,84,79,.4);stop-color:rgba(162,84,79,.6);stroke-width:12px}svg.tree .color-28{fill:#a25e4f;stroke:rgba(162,94,79,.4);stop-color:rgba(162,94,79,.6);stroke-width:12px}svg.tree .color-29{fill:#a2634f;stroke:rgba(162,99,79,.4);stop-color:rgba(162,99,79,.6);stroke-width:12px}svg.tree .color-30{fill:#a26d4f;stroke:rgba(162,109,79,.4);stop-color:rgba(162,109,79,.6);stroke-width:12px}svg.tree .color-31{fill:#a2724f;stroke:rgba(162,114,79,.4);stop-color:rgba(162,114,79,.6);stroke-width:12px}svg.tree .color-32{fill:#a2814f;stroke:rgba(162,129,79,.4);stop-color:rgba(162,129,79,.6);stroke-width:12px}svg.tree .color-33{fill:#a2904f;stroke:rgba(162,144,79,.4);stop-color:rgba(162,144,79,.6);stroke-width:12px}svg.tree .color-34{fill:#a29a4f;stroke:rgba(162,154,79,.4);stop-color:rgba(162,154,79,.6);stroke-width:12px}svg.tree .color-35{fill:#ac5454;stroke:rgba(172,84,84,.4);stop-color:rgba(172,84,84,.6);stroke-width:12px}svg.tree .color-36{fill:#ac545f;stroke:rgba(172,84,95,.4);stop-color:rgba(172,84,95,.6);stroke-width:12px}svg.tree .color-37{fill:#c3b424;stroke:rgba(195,180,36,.4);stop-color:rgba(195,180,36,.6);stroke-width:12px}svg.tree .heading{fill:#5e4fa2;stop-color:rgba(94,79,162,.6)}svg.tree text{dominant-baseline:hanging;fill:#fff;stroke:none}svg.tree foreignObject>textarea{all:unset;width:100%;height:100%;font-weight:600;font-family:inherit;display:inline;color:#fff}:not(.thumbnail) svg.tree{overflow:visible}svg.tree .material-icons-round{user-select:none}svg.tree [role=button]{cursor:pointer}\";","import {Component, h} from \"preact\";\r\n\r\nclass Icon extends Component<Icon.Props> {\r\n\trender({name, color, style = \"\", ...props}: Icon.Props) {\r\n\t\treturn (\r\n\t\t\t<span style={{color}} class={\"material-icons\" + (style && \"-\" + style)} {...props}>\r\n\t\t\t\t{name}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nnamespace Icon {\r\n\texport interface Props extends h.JSX.HTMLAttributes<HTMLSpanElement> {\r\n\t\tname: string;\r\n\t\tcolor?: string;\r\n\t\tstyle?: \"\" | \"round\" | \"outlined\";\r\n\t}\r\n}\r\n\r\nexport default Icon;\r\n"],"sourceRoot":""}